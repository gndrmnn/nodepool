{
  "comments": [
    {
      "key": {
        "uuid": "ba15a1d1_d11d3867",
        "filename": "/COMMIT_MSG",
        "patchSetId": 19
      },
      "lineNbr": 15,
      "author": {
        "id": 1
      },
      "writtenOn": "2015-09-22T17:44:56Z",
      "side": 1,
      "message": "^ remove",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba15a1d1_f1187c77",
        "filename": "nodepool/builder.py",
        "patchSetId": 19
      },
      "lineNbr": 47,
      "author": {
        "id": 1
      },
      "writtenOn": "2015-09-22T17:44:56Z",
      "side": 1,
      "message": "I see where the lock is used, but I don\u0027t understand what problem it\u0027s solving.",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba15a1d1_514ef66f",
        "filename": "nodepool/builder.py",
        "patchSetId": 19
      },
      "lineNbr": 47,
      "author": {
        "id": 10035
      },
      "writtenOn": "2015-09-23T03:34:47Z",
      "side": 1,
      "message": "Clarkb got it - if we shutdown the builder while were currently executing a job bad things can happen if we don\u0027t wait for the task to complete (we need to reply with a success/fail, etc).",
      "parentUuid": "ba15a1d1_f1187c77",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba15a1d1_77121c0b",
        "filename": "nodepool/builder.py",
        "patchSetId": 19
      },
      "lineNbr": 69,
      "author": {
        "id": 4146
      },
      "writtenOn": "2015-09-22T18:34:48Z",
      "side": 1,
      "message": "This lock ensures any running jobs complete before stopping the worker.",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba15a1d1_319fd451",
        "filename": "nodepool/builder.py",
        "patchSetId": 19
      },
      "lineNbr": 102,
      "author": {
        "id": 1
      },
      "writtenOn": "2015-09-22T17:54:21Z",
      "side": 1,
      "message": "I don\u0027t see this being called on startup, so previously built images won\u0027t be able to be uploaded.",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba15a1d1_d142063e",
        "filename": "nodepool/builder.py",
        "patchSetId": 19
      },
      "lineNbr": 102,
      "author": {
        "id": 10035
      },
      "writtenOn": "2015-09-23T03:34:47Z",
      "side": 1,
      "message": "Ah, yep, missed that.",
      "parentUuid": "ba15a1d1_319fd451",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba15a1d1_9126e0b8",
        "filename": "nodepool/builder.py",
        "patchSetId": 19
      },
      "lineNbr": 104,
      "author": {
        "id": 1
      },
      "writtenOn": "2015-09-22T17:44:56Z",
      "side": 1,
      "message": "Why is the worker becoming an argument?",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba15a1d1_717a1a8a",
        "filename": "nodepool/builder.py",
        "patchSetId": 19
      },
      "lineNbr": 104,
      "author": {
        "id": 10035
      },
      "writtenOn": "2015-09-23T03:34:47Z",
      "side": 1,
      "message": "Unsure what the question is, if you mean instead of an instance var its just a style thing - I tend to use args by default when its easy since this means your methods are easier to test / more well defined but not a big deal either way.",
      "parentUuid": "ba15a1d1_9126e0b8",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a2ca52d_78052678",
        "filename": "nodepool/builder.py",
        "patchSetId": 19
      },
      "lineNbr": 104,
      "author": {
        "id": 1
      },
      "writtenOn": "2015-10-15T13:14:37Z",
      "side": 1,
      "message": "Yes, that was the question.  It\u0027s more than a style thing though -- it suggests that it might be okay to pass in a gearman_worker other than self.gearman_worker, which is not at all what it is designed for.  If it were merely style, I wouldn\u0027t object, but this is presenting a confusing interface, so I think we should avoid it.",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba15a1d1_57f3580a",
        "filename": "nodepool/builder.py",
        "patchSetId": 19
      },
      "lineNbr": 113,
      "author": {
        "id": 4146
      },
      "writtenOn": "2015-09-22T18:34:48Z",
      "side": 1,
      "message": "gearman_worker is used here to register the job. I suppose it can get that via self.gearman_worker instead.",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba15a1d1_b129a48b",
        "filename": "nodepool/nodedb.py",
        "patchSetId": 19
      },
      "lineNbr": 82,
      "author": {
        "id": 1
      },
      "writtenOn": "2015-09-22T17:44:56Z",
      "side": 1,
      "message": "This table now has 2 unique keys; why?",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba15a1d1_77445c1a",
        "filename": "nodepool/nodedb.py",
        "patchSetId": 19
      },
      "lineNbr": 82,
      "author": {
        "id": 4146
      },
      "writtenOn": "2015-09-22T18:34:48Z",
      "side": 1,
      "message": "Jobs should be unique I guess this is just extra belts and suspenders having the db enforce it.",
      "parentUuid": "ba15a1d1_b129a48b",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ba15a1d1_d1de866c",
        "filename": "nodepool/nodedb.py",
        "patchSetId": 19
      },
      "lineNbr": 82,
      "author": {
        "id": 10035
      },
      "writtenOn": "2015-09-23T03:34:47Z",
      "side": 1,
      "message": "Yep - having constraints is generally a good thing, especially if were going to be relying on these constraints in the code.",
      "parentUuid": "ba15a1d1_77445c1a",
      "revId": "9c7829dc9d3ed3b50b9854421fe4ed32999f0f92",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}