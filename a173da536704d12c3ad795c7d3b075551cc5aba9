{
  "comments": [
    {
      "key": {
        "uuid": "1aca2d91_62980cc1",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 2
      },
      "writtenOn": "2015-05-07T22:34:56Z",
      "side": 1,
      "message": "This is weird with the grants above ^^ why would this be needed?",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_bdfa9f41",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 26,
      "author": {
        "id": 4146
      },
      "writtenOn": "2015-05-08T21:24:57Z",
      "side": 1,
      "message": "The test suite does expect to be able to use the openstack_citest db as well.",
      "parentUuid": "1aca2d91_62980cc1",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_657ed61a",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 10035
      },
      "writtenOn": "2015-05-07T23:38:25Z",
      "side": 1,
      "message": "How about just link to http://docs.openstack.org/developer/devstack/? Its less code here and their docs are more likely to stay up to date.",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_1da2b34b",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 42,
      "author": {
        "id": 4146
      },
      "writtenOn": "2015-05-08T21:24:57Z",
      "side": 1,
      "message": "I could, I worry about linking to too much external stuff. I could\u0027ve done that with the example config below too as nodepool has docs for that. Mostly wanted a self contained this is how you do it doc.",
      "parentUuid": "1aca2d91_657ed61a",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_c516caa6",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 10035
      },
      "writtenOn": "2015-05-07T23:38:25Z",
      "side": 1,
      "message": "(notaminusone)\nMaybe we should add this config as an example minimal config to the nodepool source, then just refer to that in here? That way we might do a better job of keeping the config up to date.",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_ddaf9b28",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 57,
      "author": {
        "id": 4146
      },
      "writtenOn": "2015-05-08T21:24:57Z",
      "side": 1,
      "message": "Ya we could put it in nodepool/etc/example.yaml or something then include it here. However there is enough variable data that the example config wouldn\u0027t be useful without the additional info in this doc.\n\nWhat is the /path/to/nodepool/things and what is the $USER and so on.",
      "parentUuid": "1aca2d91_c516caa6",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_a2e27b2d",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 60,
      "author": {
        "id": 6609
      },
      "writtenOn": "2015-05-09T00:27:33Z",
      "side": 1,
      "message": "The scripts/ and elements/ directories don\u0027t exist in the nodepool repo we pull down",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_e24ab325",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 6609
      },
      "writtenOn": "2015-05-09T00:27:33Z",
      "side": 1,
      "message": "MySQL\u0027s default root password remains unset if running unmodified, default devstack. Not sure how we want to handle this.",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ad58531_56f66ad8",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 63,
      "author": {
        "id": 6609
      },
      "writtenOn": "2015-05-11T20:51:35Z",
      "side": 1,
      "message": "Actually, it somehow works with no password or a password set during the setup of devstack, so no need to worry about this bit.",
      "parentUuid": "1aca2d91_e24ab325",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_c201f7b0",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 73,
      "author": {
        "id": 6609
      },
      "writtenOn": "2015-05-09T00:27:33Z",
      "side": 1,
      "message": "These cron lines need to be indented (I learned the hard way!)",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ad58531_d64eda95",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 104,
      "author": {
        "id": 6609
      },
      "writtenOn": "2015-05-11T20:51:35Z",
      "side": 1,
      "message": "We might need to bump this to 2048.\n\nThe error I get when building this image: \"Flavor\u0027s disk is too small for requested image.\" (grabbed quickly with a `nova show $instance_id` before nodepool killed it):\n\n\"Build of instance 0067e877-f0ec-45f7-9f35-7629b78598c0 aborted: Flavor\u0027s disk is too small for requested image.\"\n\nIndeed, the default flavor with 512M of ram only has a 1G disk:\n\n+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+\n\n| ID | Name      | Memory_MB | Disk | Ephemeral | Swap | VCPUs | RXTX_Factor | Is_Public |\n\n+----+-----------+-----------+------+-----------+------+-------+-------------+-----------+\n\n| 1  | m1.tiny   | 512       | 1    | 0         |      | 1     | 1.0         | True      |\n\n| 2  | m1.small  | 2048      | 20   | 0         |      | 1     | 1.0         | True      |\n\nSo we need either add a flavor with a smaller disk, or to go to the next highest, the m1.small, with the 2048M of RAM.",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_4293d0a3",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 114,
      "author": {
        "id": 2
      },
      "writtenOn": "2015-05-07T22:34:56Z",
      "side": 1,
      "message": "/path/to/devstack/openrc is /home/stack/openrc, no? I mean, it doesn\u0027t change.",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_8587b2d6",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 114,
      "author": {
        "id": 10035
      },
      "writtenOn": "2015-05-07T23:38:25Z",
      "side": 1,
      "message": "You could run this as any random user, I believe.",
      "parentUuid": "1aca2d91_4293d0a3",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_3de68fb0",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 114,
      "author": {
        "id": 4146
      },
      "writtenOn": "2015-05-08T21:24:57Z",
      "side": 1,
      "message": "Correct, the location of the openrc has nothing to do with the stack user created by devstack. It is instead determined by the location you have cloned devstack to.",
      "parentUuid": "1aca2d91_8587b2d6",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_02992fc4",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 122,
      "author": {
        "id": 6609
      },
      "writtenOn": "2015-05-09T00:27:33Z",
      "side": 1,
      "message": "This is where I figured out the scripts/ directory doesn\u0027t exist :)",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ad58531_5cc1e97f",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 124,
      "author": {
        "id": 6609
      },
      "writtenOn": "2015-05-11T22:35:39Z",
      "side": 1,
      "message": "This command hangs waiting for input, instead use this or similar so it\u0027s non-interactive:\n\nsudo adduser --disabled-password --gecos \"\" jenkins",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_a53ceee2",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 126,
      "author": {
        "id": 10035
      },
      "writtenOn": "2015-05-07T23:38:25Z",
      "side": 1,
      "message": "/home/jenkins? Doesnt this need to be /home/$USER?",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_1dd4f3ba",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 126,
      "author": {
        "id": 4146
      },
      "writtenOn": "2015-05-08T21:24:57Z",
      "side": 1,
      "message": "No we are hardcoding jenkins as the user on line 108.",
      "parentUuid": "1aca2d91_a53ceee2",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ad58531_dc2f19f5",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 126,
      "author": {
        "id": 6609
      },
      "writtenOn": "2015-05-11T22:35:39Z",
      "side": 1,
      "message": "Oh, pipes with sudo...Permission denied. Need to use something like:\n\nsudo bash -c \"cat \u003e /home/jenkins/.ssh/authorized_keys \u003c\u003c INNEREOF\n\n$PUB_KEY\n\nINNEREOF\"",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_c51c8a79",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 129,
      "author": {
        "id": 10035
      },
      "writtenOn": "2015-05-07T23:38:25Z",
      "side": 1,
      "message": "ditto here and next line",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_dddafbe7",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 129,
      "author": {
        "id": 4146
      },
      "writtenOn": "2015-05-08T21:24:57Z",
      "side": 1,
      "message": "See above.",
      "parentUuid": "1aca2d91_c51c8a79",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ad58531_07d0aa52",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 132,
      "author": {
        "id": 6609
      },
      "writtenOn": "2015-05-11T22:35:39Z",
      "side": 1,
      "message": "Then maybe we need to make this script executable?\n\nchmod +x /path/to/nodepool/things/scripts/prepare_node_ubuntu.sh\n\n...but this hasn\u0027t actually helped.",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "1aca2d91_2229cb37",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 134,
      "author": {
        "id": 6609
      },
      "writtenOn": "2015-05-09T00:27:33Z",
      "side": 1,
      "message": "Before running this, you need to create an empty nodepool database in mysql.",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5ad58531_96e17201",
        "filename": "doc/source/testing.rst",
        "patchSetId": 3
      },
      "lineNbr": 134,
      "author": {
        "id": 6609
      },
      "writtenOn": "2015-05-11T20:51:35Z",
      "side": 1,
      "message": "So you can just add a:\n\nmysql -u root -p -e \"CREATE DATABASE nodepool;\"",
      "parentUuid": "1aca2d91_2229cb37",
      "revId": "a173da536704d12c3ad795c7d3b075551cc5aba9",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}