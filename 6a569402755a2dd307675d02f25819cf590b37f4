{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "42fa892a_f6f91401",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 476,
      "author": {
        "id": 4146
      },
      "writtenOn": "2022-07-28T17:19:47Z",
      "side": 1,
      "message": "OpenDev has ARM64 and x86_64 builders with disjoint providers and diskimage lists: https://opendev.org/openstack/project-config/src/branch/master/nodepool/nb03.opendev.org.yaml#L91-L196 vs https://opendev.org/openstack/project-config/src/branch/master/nodepool/nodepool.yaml#L103-L363. I\u0027m not sure this fix will fix the issue for OpenDev as a result.\n\nIn OpenDev\u0027s case we have to have disjoint diskimages because we can\u0027t do cross arch builds (and even if we could they would very likely be slow due emulation as with docker).",
      "revId": "6a569402755a2dd307675d02f25819cf590b37f4",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0a063e57_5c5e7a4a",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 476,
      "author": {
        "id": 1
      },
      "writtenOn": "2022-07-28T17:26:12Z",
      "side": 1,
      "message": "I think OpenDev will need stub diskimages for everything, but the arm builder won\u0027t build them without any providers using them.",
      "parentUuid": "42fa892a_f6f91401",
      "revId": "6a569402755a2dd307675d02f25819cf590b37f4",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5291d921_81fd2c25",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 476,
      "author": {
        "id": 1
      },
      "writtenOn": "2022-07-28T17:37:22Z",
      "side": 1,
      "message": "https://review.opendev.org/851444 is the change for opendev.",
      "parentUuid": "42fa892a_f6f91401",
      "revId": "6a569402755a2dd307675d02f25819cf590b37f4",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5cbf9061_a480bd33",
        "filename": "nodepool/tests/unit/test_builder.py",
        "patchSetId": 1
      },
      "lineNbr": 263,
      "author": {
        "id": 4146
      },
      "writtenOn": "2022-07-28T17:37:43Z",
      "side": 1,
      "message": "Do we also need to assert that builder2 went through a cleanup cycle to ensure it has had a chance to clean up fake-image1? Put another way is there a race here in checking that the zk build record for fake-image1 is present and attempting to delete it?",
      "revId": "6a569402755a2dd307675d02f25819cf590b37f4",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87186040_e2b99a8f",
        "filename": "nodepool/tests/unit/test_builder.py",
        "patchSetId": 1
      },
      "lineNbr": 263,
      "author": {
        "id": 1
      },
      "writtenOn": "2022-07-28T17:42:19Z",
      "side": 1,
      "message": "I believe that since the builder kicks off a cleanup at startup and it\u0027s quite fast, it should be complete by the time the secound build we wait for is done.  I think there is a possibility the thread could be starved, but that would probably just make this test flakey.  Guaranteeing that is fairly difficult with the nodepool test infrastructure.",
      "parentUuid": "5cbf9061_a480bd33",
      "revId": "6a569402755a2dd307675d02f25819cf590b37f4",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5975b1f0_482bdca5",
        "filename": "nodepool/tests/unit/test_builder.py",
        "patchSetId": 1
      },
      "lineNbr": 263,
      "author": {
        "id": 4146
      },
      "writtenOn": "2022-07-28T17:44:25Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "87186040_e2b99a8f",
      "revId": "6a569402755a2dd307675d02f25819cf590b37f4",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}