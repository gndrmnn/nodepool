{
  "comments": [
    {
      "key": {
        "uuid": "9fdfeff1_55e2a5a1",
        "filename": "nodepool/driver/runc/handler.py",
        "patchSetId": 22
      },
      "lineNbr": 102,
      "author": {
        "id": 13413
      },
      "writtenOn": "2019-02-15T12:33:22Z",
      "side": 1,
      "message": "This looks OK to me who has not checked the rest of Zuul on how these methods are used, but they do not work for me. I am aiming for max. one container per each \"pool\", and this is the config that I am using:\n\n # This file is generated by Ansible\n #  DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN\n #\n ---\n images-dir: /opt/nodepool/images\n \n zookeeper-servers:\n   - host: localhost\n     port: 2181\n \n diskimages: []\n \n labels:\n   - name: f29\n     min-ready: 0\n     max-ready: 0\n \n providers:\n   - name: potemkin-runc\n     driver: runc\n     pools:\n       - name: ci-f29-potemkin05-vm.vesnicky.cesnet.cz\n         host-key: \u0027ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIHuMVGaDJLxNlUBDQ05zM2/aEtvBoFL/quv1YK0oEkgJ\u0027\n         max-servers: 1\n         labels:\n           - name: f29\n             username: ci\n             path: /containers/f29\n       - name: ci-f29-potemkin06-vm.vesnicky.cesnet.cz\n         host-key: \u0027ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIHH329IczhjR/WGSHTLtMENVP5rrKblyLZr3HWOkwgIY\u0027\n         max-servers: 1\n         labels:\n           - name: f29\n             username: ci\n             path: /containers/f29\n       - name: ci-f29-potemkin07-vm.vesnicky.cesnet.cz\n         host-key: \u0027ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEJTPjfpP0z3mKwz8iL8rfUwN+G10Ucs+XUHrXd9INWu\u0027\n         max-servers: 1\n         labels:\n           - name: f29\n             username: ci\n             path: /containers/f29\n       - name: ci-f29-potemkin08-vm.vesnicky.cesnet.cz\n         host-key: \u0027ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIJL8dD6/MD4pDKxxqgM7o24PtBDCsCIx6fUvOLMb0Z+q\u0027\n         max-servers: 1\n         labels:\n           - name: f29\n             username: ci\n             path: /containers/f29\n\nWhen I submitted a patch which requires four jobs, three of them were launched at one node:\n\n $ ssh root@nodepool.gerrit.cesnet.cz nodepool list\n +------------+---------------+-------+-------------------------------+-------------+--------------------------------+--------+-------------+--------+\n | ID         | Provider      | Label | Server ID                     | Public IPv4 | IPv6                           | State  | Age         | Locked |\n +------------+---------------+-------+-------------------------------+-------------+--------------------------------+--------+-------------+--------+\n | 0000000056 | potemkin-runc | f29   | 0000000056-f29-200-0000000053 | None        | 2001:718:1:28:5054:ff:fece:501 | in-use | 00:00:00:16 | locked |\n | 0000000058 | potemkin-runc | f29   | 0000000058-f29-200-0000000055 | None        | 2001:718:1:28:5054:ff:fece:801 | in-use | 00:00:00:16 | locked |\n | 0000000057 | potemkin-runc | f29   | 0000000057-f29-200-0000000054 | None        | 2001:718:1:28:5054:ff:fece:501 | in-use | 00:00:00:16 | locked |\n | 0000000059 | potemkin-runc | f29   | 0000000059-f29-200-0000000056 | None        | 2001:718:1:28:5054:ff:fece:501 | in-use | 00:00:00:16 | locked |\n +------------+---------------+-------+-------------------------------+-------------+--------------------------------+--------+-------------+--------+\n\n(The last part of the IPv6 address identifies the runc hypervisor in this case.)\n\nWhat am I doing wrong?",
      "range": {
        "startLine": 91,
        "startChar": 0,
        "endLine": 102,
        "endChar": 20
      },
      "revId": "0d67bc8ea0d6fc99ba1c57f32b165eaf5a204232",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}