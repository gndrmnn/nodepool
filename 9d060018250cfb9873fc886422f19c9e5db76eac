{
  "comments": [
    {
      "key": {
        "uuid": "3fa7e38b_5e7240af",
        "filename": "nodepool/tests/unit/test_launcher.py",
        "patchSetId": 5
      },
      "lineNbr": 2110,
      "author": {
        "id": 25733
      },
      "writtenOn": "2019-10-07T16:39:52Z",
      "side": 1,
      "message": "Note to reviewers: this section seems a bit racey. Specifically it\u0027s trying to assert that there are two ports that have leaked.\n\nI think this check is unnecessary because of the stat check at the end of this check.",
      "range": {
        "startLine": 2108,
        "startChar": 8,
        "endLine": 2110,
        "endChar": 52
      },
      "revId": "9d060018250cfb9873fc886422f19c9e5db76eac",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_794cf675",
        "filename": "nodepool/tests/unit/test_launcher.py",
        "patchSetId": 5
      },
      "lineNbr": 2110,
      "author": {
        "id": 3099
      },
      "writtenOn": "2019-10-07T17:29:07Z",
      "side": 1,
      "message": "Well, the thing about only depending on stats reporting assert is that you are only asserting stats reporting. :)\n\nIf that were the only check, and it failed, you won\u0027t know if it was the stats reporting itself that failed, or something with cleaning up down ports. You\u0027d then have to go back and add asserts to investigate and validate things you are assuming to be true before you get to the stats reporting part. I believe it\u0027s best to assert your assumptions as early as possible for when the test *does* fail.\n\nAlso, I don\u0027t think this is racey in it\u0027s original form. It may be NOW that you are lowering the cleanup interval early.",
      "parentUuid": "3fa7e38b_5e7240af",
      "range": {
        "startLine": 2108,
        "startChar": 8,
        "endLine": 2110,
        "endChar": 52
      },
      "revId": "9d060018250cfb9873fc886422f19c9e5db76eac",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_0a41db0b",
        "filename": "nodepool/tests/unit/test_launcher.py",
        "patchSetId": 5
      },
      "lineNbr": 2110,
      "author": {
        "id": 25733
      },
      "writtenOn": "2019-10-08T06:58:04Z",
      "side": 1,
      "message": "I agree with you on all counts, I was too hasty - an alternative way to model this test is to check if the timeout is semi-accurate by measuring the delay in port cleanup.",
      "parentUuid": "3fa7e38b_794cf675",
      "range": {
        "startLine": 2108,
        "startChar": 8,
        "endLine": 2110,
        "endChar": 52
      },
      "revId": "9d060018250cfb9873fc886422f19c9e5db76eac",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3fa7e38b_be6254d7",
        "filename": "nodepool/tests/unit/test_launcher.py",
        "patchSetId": 5
      },
      "lineNbr": 2117,
      "author": {
        "id": 25733
      },
      "writtenOn": "2019-10-07T16:39:52Z",
      "side": 1,
      "message": "This assert should cover any possible race conditions. This stat will only be 2 if exactly 2 ports leaked.",
      "range": {
        "startLine": 2116,
        "startChar": 8,
        "endLine": 2117,
        "endChar": 52
      },
      "revId": "9d060018250cfb9873fc886422f19c9e5db76eac",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543",
      "unresolved": false
    }
  ]
}