{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "0be64d4d_f1236b14",
        "filename": "doc/source/operation.rst",
        "patchSetId": 1
      },
      "lineNbr": 500,
      "author": {
        "id": 27582
      },
      "writtenOn": "2024-02-28T14:29:43Z",
      "side": 1,
      "message": "This means this gauge will be either 0 or 1, right?",
      "revId": "646b7f49279b89850aa95671f64ebbbf392fc1d2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2d78f689_bf39e3cb",
        "filename": "doc/source/operation.rst",
        "patchSetId": 1
      },
      "lineNbr": 500,
      "author": {
        "id": 1
      },
      "writtenOn": "2024-02-28T14:32:09Z",
      "side": 1,
      "message": "Currently, yes.",
      "parentUuid": "0be64d4d_f1236b14",
      "revId": "646b7f49279b89850aa95671f64ebbbf392fc1d2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c8b6de7_a52bd571",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 440,
      "author": {
        "id": 27582
      },
      "writtenOn": "2024-02-28T14:29:43Z",
      "side": 1,
      "message": "Do we have to sanitize the image name here (no dots, spaces, ...) and also in other places where we use that in a metric?",
      "revId": "646b7f49279b89850aa95671f64ebbbf392fc1d2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d15771bb_2dae3420",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 440,
      "author": {
        "id": 1
      },
      "writtenOn": "2024-02-28T14:32:09Z",
      "side": 1,
      "message": "That is something to consider, but since we don\u0027t in similar places, I don\u0027t think we should here. Strictly speaking, including dots isn\u0027t terrible, just weird.  The rest get translated by statsd anyway.",
      "parentUuid": "3c8b6de7_a52bd571",
      "revId": "646b7f49279b89850aa95671f64ebbbf392fc1d2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4461eba_3d1e2d36",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 709,
      "author": {
        "id": 27582
      },
      "writtenOn": "2024-02-28T14:36:15Z",
      "side": 1,
      "message": "Could we end up publishing stale metrics when all the upload and build workers are busy?",
      "revId": "646b7f49279b89850aa95671f64ebbbf392fc1d2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a27ca532_e1b4f968",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 709,
      "author": {
        "id": 1
      },
      "writtenOn": "2024-02-28T14:42:04Z",
      "side": 1,
      "message": "Yes, but the metrics are from the perspective of the individual builder, so that kind of makes sense.  If we don\u0027t like that, we could move the paused check out of this thread and into the cleanup thread; or we could drop it and just have idle/building.",
      "parentUuid": "a4461eba_3d1e2d36",
      "revId": "646b7f49279b89850aa95671f64ebbbf392fc1d2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a09af42f_79c9d4c3",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 712,
      "author": {
        "id": 4146
      },
      "writtenOn": "2024-03-07T19:08:52Z",
      "side": 1,
      "message": "We access _image_status for upload workers when reporting in the cleanup method this way:\n\n```\nupload_worker._image_status.get(image_name, {}).items()\n```\n\nHere in the build worker we have a different type for _image_status which is to just assign constant integer values rather than dicts to the keys. Personally I find this mismatch a bit confusing particularly since the attribute name is the same and is initialized in the base class. Maybe use two different keys initialized in the appropriate worker to make this more clear or use a consistent type?",
      "revId": "646b7f49279b89850aa95671f64ebbbf392fc1d2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5fdb4624_3a5cdaeb",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 712,
      "author": {
        "id": 4146
      },
      "writtenOn": "2024-03-07T19:45:32Z",
      "side": 1,
      "message": "We discussed this really quickly and decided it isn\u0027t worth the churn and effort to rewrite this change. But something to try and be aware of in the future.",
      "parentUuid": "a09af42f_79c9d4c3",
      "revId": "646b7f49279b89850aa95671f64ebbbf392fc1d2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4a31d33e_1fb9527d",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 712,
      "author": {
        "id": 1
      },
      "writtenOn": "2024-03-07T19:46:00Z",
      "side": 1,
      "message": "True, and distinct variable names probably would have been a good idea in retrospect.  But I think this probably looks more confusing in review than in the code; the two classes handle images differently enough that it wasn\u0027t confusing when working on it.  My line of thinking at the time was: They both have an image status, but each just has a different data format for the value.",
      "parentUuid": "a09af42f_79c9d4c3",
      "revId": "646b7f49279b89850aa95671f64ebbbf392fc1d2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "01657d80_8bca34d6",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 712,
      "author": {
        "id": 1
      },
      "writtenOn": "2024-03-07T19:46:00Z",
      "side": 1,
      "message": "True, and distinct variable names probably would have been a good idea in retrospect.  But I think this probably looks more confusing in review than in the code; the two classes handle images differently enough that it wasn\u0027t confusing when working on it.  My line of thinking at the time was: They both have an image status, but each just has a different data format for the value.",
      "parentUuid": "a09af42f_79c9d4c3",
      "revId": "646b7f49279b89850aa95671f64ebbbf392fc1d2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1c607097_37ccfee6",
        "filename": "nodepool/builder.py",
        "patchSetId": 1
      },
      "lineNbr": 712,
      "author": {
        "id": 1
      },
      "writtenOn": "2024-03-07T19:46:00Z",
      "side": 1,
      "message": "True, and distinct variable names probably would have been a good idea in retrospect.  But I think this probably looks more confusing in review than in the code; the two classes handle images differently enough that it wasn\u0027t confusing when working on it.  My line of thinking at the time was: They both have an image status, but each just has a different data format for the value.",
      "parentUuid": "a09af42f_79c9d4c3",
      "revId": "646b7f49279b89850aa95671f64ebbbf392fc1d2",
      "serverId": "4a232e18-c5a9-48ee-94c0-e04e7cca6543"
    }
  ]
}